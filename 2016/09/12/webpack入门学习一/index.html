<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>webpack入门学习一 | 个人博客</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">webpack入门学习一</h1><a id="logo" href="/.">个人博客</a><p class="description">一个追求极致用户体验的前端开发</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 主页</i></a><a href="/categories"><i class="fa fa-th"> 分类</i></a><a href="/tags"><i class="fa fa-tags"> 标签</i></a><a href="/about"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">webpack入门学习一</h1><div class="post-meta">Sep 12, 2016<span> | </span><span class="category"><a href="/categories/webpack/">webpack</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>默认已经安装了nodejs，npm的情况。<br>包安装有两种，一种是全局安装，一种是局部安装。</p>
<p>1.全局安装(可以不进行此步骤)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install webpack -g</div></pre></td></tr></table></figure>
<p>2.创建一个新的项目目录（sample），切换至新目录，然后自动创建package.json。里面需要填写的一些信息，全部直接回车即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm init</div></pre></td></tr></table></figure>
<p>3.package.json文件已经创建完成，在本项目中安装webpack，此步骤要在步骤2完成之后，即已经创建了package.json。否则会出现WARN等情况。（我的mac，先执行了步骤3，然后执行步骤2，安装提示成功，但是都看不到node_modules文件夹）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install webpack --save-dev</div></pre></td></tr></table></figure>
<h4 id="使用webpack"><a href="#使用webpack" class="headerlink" title="使用webpack"></a>使用webpack</h4><p>1.进入项目目录，创建app和public文件夹，app用于存放源文件，public用于打包后的文件。创建三个测试文件，index.html用于加载打包后的js文件，放在public中，两个js文件放在app文件夹中（hello.js和main.js）。</p>
<p>如图：</p>
<p><img src="https://ooo.0o0.ooo/2016/09/12/57d64a3b4fbdd.png" alt="sample项目目录"></p>
<p>2.index.html文件只有最基础的html代码，目的就是加载打包后的js文件（bundle.js）。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span> <span class="attr">ontouchstart</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>3.hello.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> hello = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</div><div class="line">    hello.textContent = <span class="string">"Hello World!"</span>;</div><div class="line">    <span class="keyword">return</span> hello;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4.main.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> hello = <span class="built_in">require</span>(<span class="string">"./hello.js"</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">"root"</span>).appendChild(hello());</div></pre></td></tr></table></figure>
<p>5.通过命令行使用webpack，需要指定一个入口文件（main.js），webpack会自动识别项目所依赖的所有文件。</p>
<p>命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpack &#123;entry file/入口文件&#125; &#123;destination <span class="keyword">for</span> bundled file/存放bundle.js的地方&#125;</div></pre></td></tr></table></figure>
<p>如果进行全局安装了webpack(即 安装–第一步–全局安装)，则可以使用命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpack app/main.js public/bundle.js</div></pre></td></tr></table></figure>
<p>如果没有进行全局安装，则需要使用如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node_modules/.bin/webpack app/main.js public/bundle.js</div></pre></td></tr></table></figure>
<p>结果：</p>
<p><img src="https://ooo.0o0.ooo/2016/09/12/57d652472ef36.png" alt="运行结果"></p>
<p>打开html，显示了hello.js中的“Hello World!”，如图：</p>
<p><img src="https://ooo.0o0.ooo/2016/09/12/57d653edb9d9d.png" alt="index.html"></p>
<h4 id="通过配置文件来使用Webpack"><a href="#通过配置文件来使用Webpack" class="headerlink" title="通过配置文件来使用Webpack"></a>通过配置文件来使用Webpack</h4><p>在目录中新建webpack.config.js文件用来存放webpack的配置信息；<br>如下所示，包含入口文件、打包后的文件、打包后文件存放的路径。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    entry: __dirname + <span class="string">"app/main.js"</span>, <span class="comment">// 入口文件</span></div><div class="line">    output: &#123;</div><div class="line">        path: __dirname + <span class="string">"public"</span>, <span class="comment">// 打包后的路径</span></div><div class="line">        filename: <span class="string">"bundle.js"</span> <span class="comment">// 打包后输出的文件名</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong><em> 注：“__dirname”是node.js中的一个全局变量，它指向当前执行脚本所在的目录。 </em></strong></p>
<p>现在只需要在命令行中运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// 全局安装</div><div class="line">webpack</div><div class="line"></div><div class="line">// 未全局安装</div><div class="line">node_modules/.bin/webpack</div></pre></td></tr></table></figure>
<h4 id="通过快捷方式执行命令"><a href="#通过快捷方式执行命令" class="headerlink" title="通过快捷方式执行命令"></a>通过快捷方式执行命令</h4><p>执行类似于node_modules/.bin/webpack这样的命令其实是比较烦人且容易出错的，可以在package.json<br>中对npm脚本进行配置(scripts里面)，配置后可以通过npm start命令来代替上面繁琐的命令，配置如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"name"</span>: <span class="string">"1"</span>,</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">    <span class="attr">"description"</span>: <span class="string">""</span>,</div><div class="line">    <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</div><div class="line">    <span class="attr">"scripts"</span>: &#123;</div><div class="line">        <span class="attr">"start"</span>: <span class="string">"webpack"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"author"</span>: <span class="string">""</span>,</div><div class="line">    <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</div><div class="line">    <span class="attr">"devDependencies"</span>: &#123;</div><div class="line">        <span class="attr">"sass"</span>: <span class="string">"^0.5.0"</span>,</div><div class="line">        <span class="attr">"webpack"</span>: <span class="string">"^1.13.2"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong><em>     注：package.json中的脚本部分已经默认在命令前添加了node_modules/.bin路径，所以无论是全局还是局部安装的Webpack，都不需要写前面那指明详细的路径了。 </em></strong></p>
<p>npm的start是一个特殊的脚本名称，它的特殊性表现在，在命令行中使用npm start就可以执行相关命令，如果对应的此脚本名称不是start，想要在命令行中运行时，需要这样用npm run {script name}如npm run build。</p>
<p><img src="https://ooo.0o0.ooo/2016/09/12/57d65c450bc90.png" alt="npm start"></p>
<p>在package.json里面，添加一个build的命令，测试如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"name"</span>: <span class="string">"1"</span>,</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">    <span class="attr">"description"</span>: <span class="string">""</span>,</div><div class="line">    <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</div><div class="line">    <span class="attr">"scripts"</span>: &#123;</div><div class="line">        <span class="attr">"start"</span>: <span class="string">"webpack"</span>,</div><div class="line">        <span class="attr">"build"</span>: <span class="string">"webpack"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"author"</span>: <span class="string">""</span>,</div><div class="line">    <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</div><div class="line">    <span class="attr">"devDependencies"</span>: &#123;</div><div class="line">        <span class="attr">"sass"</span>: <span class="string">"^0.5.0"</span>,</div><div class="line">        <span class="attr">"webpack"</span>: <span class="string">"^1.13.2"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行命令行，npm run build，结果如下：</p>
<p><img src="https://ooo.0o0.ooo/2016/09/12/57d65d12d4e3d.png" alt="npm run build"></p>
<h4 id="生成Source-Maps"><a href="#生成Source-Maps" class="headerlink" title="生成Source Maps"></a>生成Source Maps</h4><p>Source Maps作用就是便于调试，需要在webpack.config.js中配置devtool选项，它有四种不同的配置选项，如下：</p>
<table>
<thead>
<tr>
<th>devtool选项</th>
<th style="text-align:center">配置结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>source-map</td>
<td style="text-align:center">在一个单独的文件中产生一个完整且功能完全的文件。这个文件具有最好的source map，但是它会减慢打包文件的构建速度；</td>
</tr>
<tr>
<td>cheap-module-source-map</td>
<td style="text-align:center">在一个单独的文件中生成一个不带列映射的map，不带列映射提高项目构建速度，但是也使得浏览器开发者工具只能对应到具体的行，不能对应到具体的列（符号），会对调试造成不便；</td>
</tr>
<tr>
<td>eval-source-map</td>
<td style="text-align:center">使用eval打包源文件模块，在同一个文件中生成干净的完整的source map。这个选项可以在不影响构建速度的前提下生成完整的sourcemap，但是对打包后输出的JS文件的执行具有性能和安全的隐患。不过在开发阶段这是一个非常好的选项，但是在生产阶段一定不要用这个选项；</td>
</tr>
<tr>
<td>cheap-module-eval-source-map</td>
<td style="text-align:center">这是在打包文件时最快的生成source map的方法，生成的Source Map 会和打包后的JavaScript文件同行显示，没有列映射，和eval-source-map选项具有相似的缺点；</td>
</tr>
</tbody>
</table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	devtool: <span class="string">"source-map"</span>,</div><div class="line">	entry: __dirname + <span class="string">"/app/main.js"</span>, <span class="comment">// 入口</span></div><div class="line">	output: &#123;</div><div class="line">		path: __dirname + <span class="string">"/public"</span>, <span class="comment">// 打包后的路径</span></div><div class="line">		filename: <span class="string">"bundle.js"</span> <span class="comment">// 打包后输出的文件名</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>正常情况下，如果不设置source maps。打包后的文件都是多个合并压缩在一起的，如果其中某行出现错误，根本无法找到对应的位置。<br>如果有source maps则出现错误，调试时会找到对应的js文件以及错误位置。</p>
<h4 id="构建webpack本地服务器"><a href="#构建webpack本地服务器" class="headerlink" title="构建webpack本地服务器"></a>构建webpack本地服务器</h4><p>安装webpack-dev-server</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install webpack-dev-server --save-dev</div></pre></td></tr></table></figure>
<p>devserver为webpack配置选项中的一项，参数说明：</p>
<table>
<thead>
<tr>
<th>devserver配置选项</th>
<th style="text-align:center">功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>contentBase</td>
<td style="text-align:center">默认webpack-dev-server会为根文件夹提供本地服务器，如果想为另外一个目录下的文件提供本地服务器，应该在这里设置其所在目录（本例设置到“public”目录）</td>
</tr>
<tr>
<td>port</td>
<td style="text-align:center">设置默认监听端口，如果省略，默认为”8080“</td>
</tr>
<tr>
<td>inline</td>
<td style="text-align:center">设置为true，当源文件改变时会自动刷新页面</td>
</tr>
<tr>
<td>colors</td>
<td style="text-align:center">设置为true，使终端输出的文件为彩色的</td>
</tr>
<tr>
<td>historyApiFallback</td>
<td style="text-align:center">在开发单页应用时非常有用，它依赖于HTML5 history API，如果设置为true，所有的跳转将指向index.html</td>
</tr>
</tbody>
</table>
<p>添加配置信息到webpack.config.js中，如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    devtool: <span class="string">"source-map"</span>,</div><div class="line">    entry: __dirname + <span class="string">"/app/main.js"</span>, <span class="comment">// 入口</span></div><div class="line">    output: &#123;</div><div class="line">        path: __dirname + <span class="string">"/public"</span>, <span class="comment">// 打包后的路径</span></div><div class="line">        filename: <span class="string">"bundle.js"</span> <span class="comment">// 打包后输出的文件名</span></div><div class="line">    &#125;,</div><div class="line">    devServer: &#123;</div><div class="line">        contentBase: <span class="string">"./public"</span>, <span class="comment">// 打包后的目录</span></div><div class="line">        colors: <span class="literal">true</span>, <span class="comment">// 终端输出结果为彩色</span></div><div class="line">        inline: <span class="literal">true</span>, <span class="comment">// 实时刷新</span></div><div class="line">        historyApiFallback: <span class="literal">true</span> <span class="comment">//不跳转</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以通过命令行开启本地服务器，如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// 全局安装</div><div class="line">webpack-dev-server --inline --hot</div><div class="line"></div><div class="line">// 局部安装</div><div class="line">node_modules/.bin/webpack-dev-server --inline --hot</div></pre></td></tr></table></figure></p>
<p>也可以通过快捷方式执行命令，需要在package.json中的scripts里面配置，如下：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"name"</span>: <span class="string">"1"</span>,</div><div class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</div><div class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</div><div class="line">  <span class="attr">"scripts"</span>: &#123;</div><div class="line">    <span class="attr">"dev"</span>: <span class="string">"webpack-dev-server --inline --hot"</span>,</div><div class="line">    <span class="attr">"build"</span>: <span class="string">"webpack"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"author"</span>: <span class="string">""</span>,</div><div class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</div><div class="line">  <span class="attr">"devDependencies"</span>: &#123;</div><div class="line">    <span class="attr">"sass"</span>: <span class="string">"^0.5.0"</span>,</div><div class="line">    <span class="attr">"webpack"</span>: <span class="string">"^1.13.2"</span>,</div><div class="line">    <span class="attr">"webpack-dev-server"</span>: <span class="string">"^1.15.1"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>命令行中，通过npm run dev，开启本地服务器之后，文件修改浏览器会时时刷新， 如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm run dev</div></pre></td></tr></table></figure></p>
<p>运行结果： </p>
<p><img src="https://ooo.0o0.ooo/2016/09/13/57d7b27d61aac.jpeg" alt="命令行结果"></p>
<h3 id="Loaders"><a href="#Loaders" class="headerlink" title="Loaders"></a>Loaders</h3><p>Loaders需要单独安装，并且在webpack.config.js中的module里面进行配置，Loaders配置包含以下几个方面：</p>
<table>
<thead>
<tr>
<th>Loaders配置选项</th>
<th style="text-align:center">功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>test</td>
<td style="text-align:center">一个匹配loaders所处理的文件的拓展名的正则表达式（必须）</td>
</tr>
<tr>
<td>loader</td>
<td style="text-align:center">loader的名称（必须）</td>
</tr>
<tr>
<td>include/exclude</td>
<td style="text-align:center">手动添加必须处理的文件（文件夹）或屏蔽不需要处理的文件（文件夹）（可选）</td>
</tr>
<tr>
<td>query</td>
<td style="text-align:center">为loaders提供额外的设置选项（可选）</td>
</tr>
</tbody>
</table>
<h4 id="loaders—–json-转换json为javascript"><a href="#loaders—–json-转换json为javascript" class="headerlink" title="loaders—–json 转换json为javascript"></a>loaders—–json 转换json为javascript</h4><p>1.安装json的loader<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev json-loader</div></pre></td></tr></table></figure></p>
<p>2.在webpack.config.js的module里面进行配置<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	devtool: <span class="string">"source-map"</span>,</div><div class="line">	entry: __dirname + <span class="string">"/app/main.js"</span>, <span class="comment">// 入口</span></div><div class="line">	output: &#123;</div><div class="line">		path: __dirname + <span class="string">"/public"</span>, <span class="comment">// 打包后的路径</span></div><div class="line">		filename: <span class="string">"bundle.js"</span> <span class="comment">// 打包后输出的文件名</span></div><div class="line">	&#125;,</div><div class="line">	devServer: &#123;</div><div class="line">		contentBase: <span class="string">"./public"</span>, <span class="comment">// 打包后的目录</span></div><div class="line">		colors: <span class="literal">true</span>, <span class="comment">// 终端输出结果为彩色</span></div><div class="line">		inline: <span class="literal">true</span>, <span class="comment">// 实时刷新</span></div><div class="line">		historyApiFallback: <span class="literal">true</span> <span class="comment">//不跳转</span></div><div class="line">	&#125;,</div><div class="line">	<span class="built_in">module</span>: &#123; <span class="comment">//配置文件中添加JSON loader</span></div><div class="line">		loaders: [&#123;</div><div class="line">			test: <span class="regexp">/\.json$/</span>,</div><div class="line">			loader: <span class="string">"json"</span></div><div class="line">		&#125;]</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3.在app文件夹中，创建一个名为hello.json的文件，输入内容：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	<span class="attr">"helloText"</span>: <span class="string">"Hello, This is JSON loader test"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>4.更新hello.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//更新hello.js</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> helloText = reqiure(<span class="string">"./hello.json"</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> hello = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</div><div class="line">    hello.textContent = helloText;</div><div class="line">    <span class="keyword">return</span> hello;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>5.运行命令npm run build，如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm run dev</div></pre></td></tr></table></figure></p>
<p>6.结果，如图：<br><img src="https://ooo.0o0.ooo/2016/09/13/57d7bc5f60573.png" alt="运行结果"></p>
<h4 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h4><p>Babel其实是一个编译JavaScript的平台，它的强大之处表现在可以通过编译帮你达到以下目的：</p>
<ul>
<li>下一代的JavaScript标准（ES6，ES7），这些标准目前并未被当前的浏览器完全的支持；</li>
<li>使用基于JavaScript进行了拓展的语言，比如React的JSX</li>
</ul>
<p>1.安装<br>Babel其实是几个模块化的包，其核心功能位于称为babel-core的npm包中，不过webpack把它们整合在一起使用，但是对于每一个你需要的功能或拓展，你都需要安装单独的包（用得最多的是解析Es6的babel-preset-es2015包和解析JSX的babel-preset-react包）。</p>
<p>一次性全部安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// npm一次性安装多个依赖模块，模块之间用空格隔开</div><div class="line">npm install --save-dev babel-core babel-loader babel-preset-es2015 babel-preset-react</div></pre></td></tr></table></figure>
<p>2.配置webpack.config.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	devtool: <span class="string">"source-map"</span>,</div><div class="line">	entry: __dirname + <span class="string">"/app/main.js"</span>, <span class="comment">// 入口</span></div><div class="line">	output: &#123;</div><div class="line">		path: __dirname + <span class="string">"/public"</span>, <span class="comment">// 打包后的路径</span></div><div class="line">		filename: <span class="string">"bundle.js"</span> <span class="comment">// 打包后输出的文件名</span></div><div class="line">	&#125;,</div><div class="line">	devServer: &#123;</div><div class="line">		contentBase: <span class="string">"./public"</span>, <span class="comment">// 打包后的目录</span></div><div class="line">		colors: <span class="literal">true</span>, <span class="comment">// 终端输出结果为彩色</span></div><div class="line">		inline: <span class="literal">true</span>, <span class="comment">// 实时刷新</span></div><div class="line">		historyApiFallback: <span class="literal">true</span> <span class="comment">//不跳转</span></div><div class="line">	&#125;,</div><div class="line">	<span class="built_in">module</span>: &#123; <span class="comment">//配置文件中添加JSON loader</span></div><div class="line">		loaders: [&#123;</div><div class="line">			test: <span class="regexp">/\.json$/</span>,</div><div class="line">			loader: <span class="string">"json"</span></div><div class="line">		&#125;,&#123;</div><div class="line">			test: <span class="regexp">/\.js$/</span>,</div><div class="line">			exclude: <span class="regexp">/node_modules/</span>,</div><div class="line">			loader: <span class="string">"babel"</span>,</div><div class="line">			query: &#123;</div><div class="line">				presets: [<span class="string">"es2015"</span>]</div><div class="line">			&#125;</div><div class="line">		&#125;]</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3.修改hello. .json，如下：(不会写es6，随便用两个新的import， let测试一下)<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// hello.json</div><div class="line">&#123;</div><div class="line">	"helloText": "Hello, This is JSON loader test",</div><div class="line">	"babelText": "This is Babel test"</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// hello.js</span></div><div class="line"><span class="keyword">import</span> h <span class="keyword">from</span> <span class="string">"./hello.json"</span>;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> hello = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</div><div class="line">    hello.textContent = h.babelText;</div><div class="line">    <span class="keyword">return</span> hello;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4.结果，如下：<br><img src="https://ooo.0o0.ooo/2016/09/13/57d7d864a1d76.png" alt="运行结果"></p>
<h4 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h4><p>css-loader 和 style-loader</p>
<p>css-loader 使你能够使用类似@import 和 url(…)的方法实现 require()的功能;<br>style-loader 将所有的计算后的样式加入页面中</p>
<p>1.安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev style-loader css-loader</div></pre></td></tr></table></figure>
<p>2.webpack.config.js配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	devtool: <span class="string">"source-map"</span>,</div><div class="line">	entry: __dirname + <span class="string">"/app/main.js"</span>, <span class="comment">// 入口</span></div><div class="line">	output: &#123;</div><div class="line">		path: __dirname + <span class="string">"/public"</span>, <span class="comment">// 打包后的路径</span></div><div class="line">		filename: <span class="string">"bundle.js"</span> <span class="comment">// 打包后输出的文件名</span></div><div class="line">	&#125;,</div><div class="line">	devServer: &#123;</div><div class="line">		contentBase: <span class="string">"./public"</span>, <span class="comment">// 打包后的目录</span></div><div class="line">		colors: <span class="literal">true</span>, <span class="comment">// 终端输出结果为彩色</span></div><div class="line">		inline: <span class="literal">true</span>, <span class="comment">// 实时刷新</span></div><div class="line">		historyApiFallback: <span class="literal">true</span> <span class="comment">//不跳转</span></div><div class="line">	&#125;,</div><div class="line">	<span class="built_in">module</span>: &#123; <span class="comment">//配置文件中添加JSON loader</span></div><div class="line">		loaders: [&#123;</div><div class="line">			test: <span class="regexp">/\.json$/</span>,</div><div class="line">			loader: <span class="string">"json"</span></div><div class="line">		&#125;,&#123;</div><div class="line">			test: <span class="regexp">/\.js$/</span>,</div><div class="line">			exclude: <span class="regexp">/node_modules/</span>,</div><div class="line">			loader: <span class="string">"babel"</span>,</div><div class="line">			query: &#123;</div><div class="line">				presets: [<span class="string">"es2015"</span>]</div><div class="line">			&#125;</div><div class="line">		&#125;,&#123;</div><div class="line">			test: <span class="regexp">/\.css$/</span>,</div><div class="line">			loader: <span class="string">"style!css"</span></div><div class="line">		&#125;]</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong><em> 注：感叹号的作用在于使同一文件能够使用不同类型的loader </em></strong></p>
<p>3.在app目录下，新建main.css文件，如下<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">html</span> &#123;</div><div class="line">  <span class="attribute">box-sizing</span>: border-box;</div><div class="line">  <span class="attribute">-ms-text-size-adjust</span>: <span class="number">100%</span>;</div><div class="line">  <span class="attribute">-webkit-text-size-adjust</span>: <span class="number">100%</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">  <span class="attribute">font-family</span>: <span class="string">'Helvetica Neue'</span>, Helvetica, Arial, sans-serif;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#f00</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>4.引入<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">"./main.css"</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> hello = <span class="built_in">require</span>(<span class="string">"./hello.js"</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">"root"</span>).appendChild(hello());</div></pre></td></tr></table></figure></p>
<p><strong><em> css会和js打包到同一个文件中 </em></strong></p>
<p>5.运行结果</p>
<p><img src="https://ooo.0o0.ooo/2016/09/19/57dfaa12b5a13.png" alt="运行结果"></p>
<h4 id="CSS-module-待研究"><a href="#CSS-module-待研究" class="headerlink" title="CSS module(待研究)"></a>CSS module(待研究)</h4><p>CSS modules 的技术就意在把JS的模块化思想带入CSS中来，通过CSS模块，所有的类名，动画名默认都只作用于当前模块。</p>
<p>Webpack从一开始就对CSS模块化提供了支持，在CSS loader中进行配置后，你所需要做的一切就是把”modules“传递都所需要的地方，然后就可以直接把CSS的类名传递到组件的代码中，且这样做只对当前组件有效，不必担心在不同的模块中具有相同的类名可能会造成的问题。具体的webpack.config.js代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	devtool: <span class="string">"source-map"</span>,</div><div class="line">	entry: __dirname + <span class="string">"/app/main.js"</span>, <span class="comment">// 入口</span></div><div class="line">	output: &#123;</div><div class="line">		path: __dirname + <span class="string">"/public"</span>, <span class="comment">// 打包后的路径</span></div><div class="line">		filename: <span class="string">"bundle.js"</span> <span class="comment">// 打包后输出的文件名</span></div><div class="line">	&#125;,</div><div class="line">	devServer: &#123;</div><div class="line">		contentBase: <span class="string">"./public"</span>, <span class="comment">// 打包后的目录</span></div><div class="line">		colors: <span class="literal">true</span>, <span class="comment">// 终端输出结果为彩色</span></div><div class="line">		inline: <span class="literal">true</span>, <span class="comment">// 实时刷新</span></div><div class="line">		historyApiFallback: <span class="literal">true</span> <span class="comment">//不跳转</span></div><div class="line">	&#125;,</div><div class="line">	<span class="built_in">module</span>: &#123; <span class="comment">//配置文件中添加JSON loader</span></div><div class="line">		loaders: [&#123;</div><div class="line">			test: <span class="regexp">/\.json$/</span>,</div><div class="line">			loader: <span class="string">"json"</span></div><div class="line">		&#125;,&#123;</div><div class="line">			test: <span class="regexp">/\.js$/</span>,</div><div class="line">			exclude: <span class="regexp">/node_modules/</span>,</div><div class="line">			loader: <span class="string">"babel"</span>,</div><div class="line">			query: &#123;</div><div class="line">				presets: [<span class="string">"es2015"</span>]</div><div class="line">			&#125;</div><div class="line">		&#125;,&#123;</div><div class="line">			test: <span class="regexp">/\.css$/</span>,</div><div class="line">			loader: <span class="string">"style!css?modules"</span></div><div class="line">		&#125;]</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="sass-scss使用"><a href="#sass-scss使用" class="headerlink" title="sass(scss使用)"></a>sass(scss使用)</h4><p>1.安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install sass-loader --save-dev</div></pre></td></tr></table></figure></p>
<p>如果出现node-sass报错安装不上去，可以尝试如下几种方式：</p>
<ul>
<li>npm uninstall node-sass</li>
<li>npm install node-sass@latest</li>
<li>sudo cnpm install node-sass@latest</li>
<li>sudo cnpm install node-sass@latest –save-dev</li>
</ul>
<p>2.新建hellp.scss<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">body</span>&#123;</div><div class="line">	<span class="attribute">background-color</span>: <span class="number">#ff0</span>;</div><div class="line">	<span class="selector-class">.root</span>&#123;</div><div class="line">		<span class="attribute">background-color</span>: <span class="number">#eee</span>;</div><div class="line">		<span class="attribute">font-size</span>: <span class="number">20px</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3.结果<br><img src="https://ooo.0o0.ooo/2016/09/19/57dfb6ff7cecc.png" alt="运行结果"></p>
<p>审查元素，css都是直接以style的方式显示在html中的，源文件中css和js是混在一起的，需要通过插件把css和js分开来。</p>
<p><img src="https://ooo.0o0.ooo/2016/09/19/57dfb82c413bc.png" alt="审查元素"></p>
<h4 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h4><ul>
<li>OccurenceOrderPlugin :为组件分配ID，通过这个插件webpack可以分析和优先考虑使用最多的模块，并为它们分配最小的ID</li>
<li>UglifyJsPlugin：压缩JS代码；</li>
<li>ExtractTextPlugin：分离CSS和JS文件</li>
</ul>
<p>OccurenceOrder 和 UglifyJS plugins 都是内置插件，只需要安装ExtractTextPlugin</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev extract-text-webpack-plugin</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</div><div class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</div><div class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">"extract-text-webpack-plugin"</span>); </div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	devtool: <span class="string">"source-map"</span>,</div><div class="line">	entry: __dirname + <span class="string">"/app/main.js"</span>, <span class="comment">// 入口</span></div><div class="line">	output: &#123;</div><div class="line">		path: __dirname + <span class="string">"/public"</span>, <span class="comment">// 打包后的路径</span></div><div class="line">		filename: <span class="string">"[name]-[hash].js"</span> <span class="comment">// 打包后输出的文件名</span></div><div class="line">	&#125;,</div><div class="line">	devServer: &#123;</div><div class="line">		contentBase: <span class="string">"./public"</span>, <span class="comment">// 打包后的目录</span></div><div class="line">		colors: <span class="literal">true</span>, <span class="comment">// 终端输出结果为彩色</span></div><div class="line">		inline: <span class="literal">true</span>, <span class="comment">// 实时刷新</span></div><div class="line">		historyApiFallback: <span class="literal">true</span>, <span class="comment">//不跳转</span></div><div class="line">		hot: <span class="literal">true</span></div><div class="line">	&#125;,</div><div class="line">	plugins: [</div><div class="line">	    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</div><div class="line">	      template: __dirname + <span class="string">"/app/index.tmpl.html"</span><span class="comment">//new 一个这个插件的实例，并传入相关的参数</span></div><div class="line">	    &#125;),</div><div class="line">	    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),<span class="comment">//热加载插件</span></div><div class="line">	    <span class="keyword">new</span> webpack.optimize.OccurenceOrderPlugin(),</div><div class="line">    	<span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(),</div><div class="line">    	<span class="keyword">new</span> ExtractTextPlugin(<span class="string">"style.css"</span>)</div><div class="line">	],</div><div class="line">	<span class="built_in">module</span>: &#123; <span class="comment">//配置文件中添加JSON loader</span></div><div class="line">		loaders: [&#123;</div><div class="line">			test: <span class="regexp">/\.json$/</span>,</div><div class="line">			loader: <span class="string">"json"</span></div><div class="line">		&#125;,&#123;</div><div class="line">			test: <span class="regexp">/\.js$/</span>,</div><div class="line">			exclude: <span class="regexp">/node_modules/</span>,</div><div class="line">			loader: <span class="string">"babel"</span>,</div><div class="line">			query: &#123;</div><div class="line">				presets: [<span class="string">"es2015"</span>]</div><div class="line">			&#125;</div><div class="line">		&#125;,&#123;</div><div class="line">			test: <span class="regexp">/\.scss$/</span>, </div><div class="line">			<span class="comment">// loader: 'style!css!sass?sourceMap'</span></div><div class="line">			loader: ExtractTextPlugin.extract(<span class="string">"style"</span>, <span class="string">"css!sass?sourceMap"</span>)</div><div class="line">		&#125;,&#123;</div><div class="line">			test: <span class="regexp">/\.css$/</span>,</div><div class="line">			<span class="comment">// loader: "style!css?modules"</span></div><div class="line">			loader: ExtractTextPlugin.extract(<span class="string">"style"</span>, <span class="string">"css?modules"</span>)</div><div class="line">		&#125;]</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样可以对js和css进行拆分，同时可以对js，css进行压缩。</p>
<h4 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h4><p>webpack可以把一个哈希值添加到打包的文件名中，使用方法如下,添加特殊的字符串混合体（[name], [id] and [hash]）到输出文件名前</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  entry: __dirname + <span class="string">"/app/main.js"</span>,</div><div class="line">  output: &#123;</div><div class="line">    path: __dirname + <span class="string">"/build"</span>,</div><div class="line">    filename: <span class="string">"[name]-[hash].js"</span></div><div class="line">  &#125;,</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>生成文件，如下：<br><img src="https://ooo.0o0.ooo/2016/09/20/57e0e9648be1c.png" alt="生成文件"></p>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p>跟着原文<a href="http://www.jianshu.com/p/42e11515c10f#" target="_blank" rel="external">简书：入门Webpack，看这篇就够了</a>把流程走了一遍，记录了一下大概步骤。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://liuxingyun2010.github.io/2016/09/12/webpack入门学习一/" data-id="ciw3sflxo0002ailei9e3kkwv" class="article-share-link">分享到</a><div class="tags"><a href="/tags/webpack/">webpack</a><a href="/tags/模块化/">模块化</a></div><div class="post-nav"><a href="/2016/09/20/webpack构建完整项目一/" class="pre">webpack构建完整项目（一）</a><a href="/2016/09/08/前端几个基本概念/" class="next">前端几个基本概念</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://liuxingyun2010.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动开发/">移动开发</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/webpack/" style="font-size: 15px;">webpack</a> <a href="/tags/模块化/" style="font-size: 15px;">模块化</a> <a href="/tags/移动端/" style="font-size: 15px;">移动端</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/09/20/webpack构建完整项目一/">webpack构建完整项目（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/12/webpack入门学习一/">webpack入门学习一</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/08/前端几个基本概念/">前端几个基本概念</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">个人博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>